<div class="config-panel">
  <!-- Floating Config Button -->
  <button 
    type="button"
    class="config-button"
    [class.active]="panelVisible()"
    (click)="togglePanel()"
    [attr.aria-label]="'common.settings' | translate">
    <i class="pi pi-cog"></i>
  </button>

  <!-- Settings Panel -->
  <div 
    class="settings-drawer"
    [class.visible]="panelVisible()"
    (click)="onOverlayClick($event)">
    
    <div class="settings-panel" (click)="$event.stopPropagation()">
      <div class="settings-header">
        <div class="flex align-items-center gap-2">
          <i class="pi pi-cog"></i>
          <span class="font-semibold text-lg">{{ 'settings.title' | translate }}</span>
        </div>
        <button type="button" class="close-button" (click)="togglePanel()">
          <i class="pi pi-times"></i>
        </button>
      </div>

      <div class="settings-content">
        
        <!-- Language Selection -->
        <div class="field">
          <label class="field-label">
            {{ 'settings.language' | translate }}
          </label>
          <select 
            class="field-select"
            [(ngModel)]="currentSettings().language"
            (change)="onLanguageChange($event)">
            <option 
              *ngFor="let option of languageOptions" 
              [value]="option.value">
              {{ option.label }}
            </option>
          </select>
        </div>

        <!-- Background Music -->
        <div class="field">
          <div class="field-header">
            <label class="field-label">
              {{ 'settings.music_volume' | translate }}
            </label>
            <div class="checkbox-container">
              <input
                type="checkbox"
                id="musicMute"
                [(ngModel)]="currentSettings().musicMuted"
                (change)="onMusicMuteChange($event)">
              <label for="musicMute" class="checkbox-label">
                {{ 'settings.mute_music' | translate }}
              </label>
            </div>
          </div>
          <input
            type="range"
            class="field-slider"
            [(ngModel)]="currentSettings().musicVolume"
            (input)="onMusicVolumeChange($event)"
            [disabled]="currentSettings().musicMuted"
            min="0"
            max="100">
          <div class="volume-display">
            {{ currentSettings().musicVolume }}%
          </div>
        </div>

        <!-- Sound Effects -->
        <div class="field">
          <div class="field-header">
            <label class="field-label">
              {{ 'settings.sound_effects_volume' | translate }}
            </label>
            <div class="checkbox-container">
              <input
                type="checkbox"
                id="soundEffectsMute"
                [(ngModel)]="currentSettings().soundEffectsMuted"
                (change)="onSoundEffectsMuteChange($event)">
              <label for="soundEffectsMute" class="checkbox-label">
                {{ 'settings.mute_sound_effects' | translate }}
              </label>
            </div>
          </div>
          <input
            type="range"
            class="field-slider"
            [(ngModel)]="currentSettings().soundEffectsVolume"
            (input)="onSoundEffectsVolumeChange($event)"
            [disabled]="currentSettings().soundEffectsMuted"
            min="0"
            max="100">
          <div class="volume-display">
            {{ currentSettings().soundEffectsVolume }}%
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
